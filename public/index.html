<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!--styles-->
    <!--link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css"-->
    <link rel="stylesheet" href="bower_components/bootswatch-dist/css/bootstrap.css">
    <link rel="stylesheet" href="css/chat-fullpage.css">
    <!--scripts-->
    <!--script src="bower_components/angular/angular.js"></script-->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
    <script src="bower_components/socket.io.client/dist/socket.io-1.3.5.js"></script>
    <!---->
    <script src="js/auth/base64-decode.js"></script>

    <script src="js/nav-bar.js"></script>

    <title>MEAN chat</title>
</head>

<body ng-app="IndexChatPageApp">
<header>
    <!--navigation bar-->
    <div id="navBarContainer"></div>
</header>
<!-- Page Content -->
<section class="container">
    <article class="row flex-row">
        <!--chat window-->
        <section class="col-xs-9">
            <div class="panel panel-default flex-col">
                <div class="panel-heading">Messages</div>
                <div class="panel-body flex-grow">
                    <ul id="chatMessagesList">
                        <li>Welcome to our chat!</li>
                    </ul>
                </div>
                <div class="panel-footer">
                    <div class="input-group">
                        <input id="chatMessageInput" type="text" class="form-control" placeholder="Type your message here">
                            <span class="input-group-btn">
                            <button id="chatSendMessageButton" class="btn btn-default" type="button">Send!</button>
                            </span>
                    </div>
                </div>
            </div>
        </section>

        <!--online users list-->
        <section class="col-xs-3">
            <div class="panel panel-default">
                <div class="panel-heading">Members</div>
                <div class="panel-body">
                    <ul>
                        <li>user 1</li>
                        <li>user 2</li>
                    </ul>
                </div>
            </div>

        </section>
    </article>
</section>
<!-- /.container -->

</body>
<script>
    //render nav-bar
    NavigationBar.renderIn("navBarContainer");

    //socket test

    var socket = io();
    $('#chatSendMessageButton').click(function(){
        socket.emit('chat message', $('#chatMessageInput').val());
        $('#chatMessageInput').val('');
        return false;
    });
    socket.on('chat message', function(msg){
        $('#chatMessagesList').append($('<li>').text(msg));
    });
</script>
</html>